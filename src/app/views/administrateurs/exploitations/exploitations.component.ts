import { CommonModule } from '@angular/common';
import { Component, OnInit } from '@angular/core';
import { FormGroup, FormsModule } from '@angular/forms';
import { ActivatedRoute, Router } from '@angular/router';
import { BsDatepickerModule } from 'ngx-bootstrap/datepicker';
import { Adress, Adresse } from 'src/app/shared/model/adresse';
import { InterfaceExploitations, InterfaceExploitationss } from 'src/app/shared/model/interface-exploitations';
import { ExploitationService } from 'src/app/shared/service/exploitation.service';

@Component({
  selector: 'app-exploitations',
  standalone: true,
  imports: [CommonModule, FormsModule, BsDatepickerModule],
  templateUrl: './exploitations.component.html',
  styleUrl: './exploitations.component.scss'
})
export class ExploitationsComponent implements OnInit{

  public adresse: Adress;
  public adresses: Adresse;
  public exploitation: InterfaceExploitations;
  public exploitations: InterfaceExploitations[];

  public exploitationForm = FormGroup;

  public toggle = true;
  public modifToggle = true;

  constructor(
    public router: Router,
    public route: ActivatedRoute,
    public exploitationService: ExploitationService,
  ) {
    this.resetExploitation();
  }

  ngOnInit(): void {
    this.exploitationService.getExploitation().subscribe({
      next: async (_exploitations) => {
        this.exploitations = _exploitations;
      }
    })
  }

  public resetExploitation(){
    this.exploitation = {
      code_couleur: "...",
      libelle:"...",
      nbDecimal: 0,
      commentaire:"...",
      siteWeb:"...",
      codenaf:"...",
      siret:"...",
      logo:"...",
      actif:true,
      adressesId:this.adresse.id? this.adresse.id:0,
      adresses: this.adresse,
      selected:false,
    }
  }

  toggleModal(){
    this.toggle = !this.toggle;
    this.modifToggle = !this.modifToggle;
  }
}
