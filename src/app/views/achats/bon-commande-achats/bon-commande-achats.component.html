
<div class="card d-flex py-1 my-2 mb-2">
    <div class="card-header d-flex bd-highlight">
      <div class="flex-grow-1 bd-highlight">
        <button type="button" class="btn btn-success btn-sm mx-1" *ngIf="!modifToggle">Enregistrer</button>
        <button type="button" class="btn btn-danger btn-sm mx-1" *ngIf="!modifToggle" (click)="cancel()">Annuler</button>
      </div>
      <div class="bd-highlight">
        <button class="btn btn-outline-success btn-sm me-1"  (click)="openModalFournisseur()" title="Ajouter bon de commande" [disabled]="!modifToggle">
          <i class="fas fa-plus"></i>
        </button>
        <button [disabled]="!modifToggle" class="btn btn-outline-danger btn-sm me-1" title="Supprimer bon de commande">
          <i class="fas fa-trash"></i>
        </button>
        <button class="btn btn-outline-primary btn-sm me-1" title="Liste bon de commande" (click)="toggleModal()" *ngIf="!toggle" [disabled]="!modifToggle">
          <i class="fas fa-list"></i>
        </button>
      </div>
    </div>
    <div class="card-body py-1" *ngIf="!toggle">
      <form #bonCommandeForm="ngForm">
        <div class="row m-2">
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Date de commande</span>
              <input type="date" class="form-control col-7" aria-label="DateCommande" aria-describedby="basic-addon1">
            </div>
          </div>
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Fournisseur</span>
              <input type="text" class="form-control col-6" [(ngModel)]="fournisseur.id" [value]="fournisseur.raison_social" aria-label="fournisseur" [disabled]="true"  aria-describedby="basic-addon1">
              <span class="input-group-text col-1" id="basic-addon1"><i class="fas fa-info"></i></span>
            </div>
          </div>
        </div>
        <div class="row m-2">
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Exploitation</span>
              <input type="text" class="form-control col-7"  [value]="exploitation.libelle" aria-label="exploitation" aria-describedby="basic-addon1" >
            </div>
          </div>
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Adresse Fournisseur</span>
              <input type="text" class="form-control col-7" [value]="fournisseur.adresse"  aria-label="adresse" [disabled]="true" aria-describedby="basic-addon1">
            </div>
          </div>
          
        </div>
        <div class="row m-2">
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Centre de revenu</span>
              <select class="form-control col-7"  [required]="true" aria-label="fournisseur" aria-describedby="basic-addon1">
                <option [ngValue]="item.id" *ngFor="let item of centres" >{{item.libelle}}</option>
              </select>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">N° bon de commande</span>
              <input type="text" class="form-control col-7" aria-label="numCommande" aria-describedby="basic-addon1" >
            </div>
          </div>
        </div>
      </form>
    </div>
    
    <div class="card-body overflow-scroll py-1" *ngIf="toggle" style="height: 650px;">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th scope="col" class="">#</th>
          <th scope="col" class="col-1 text-overflow">Date Commande</th>
          <th scope="col" class="col-2">Désignation</th>
          <th scope="col" class="col-1">Qté Commandée</th>
          <th scope="col" class="col-2">Unité de Commande </th>
          <th scope="col" class="col-2">Prix Unitaire</th>
          <th scope="col" class="col-2">Montant HT</th>
          <th scope="col" class="col-2">Rémise</th>
          
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let line of commandes" (click)="showCommande(line)">
          <td class=""></td>  
          <td class="col-1">{{line.dateCommande}}</td>
          <td class="col-2">{{line.libelle}}</td>
          <td class="col-1">{{line.quantiteCommande}}</td>
          <td class="col-2 text-overflow">{{line.unite.abreviation}}</td>
          <td class="col-2">{{line.prixUnitaire}}</td>
          <td class="col-2">{{line.montantHT}}</td>
          <td class="col-2">{{line.remise}} </td>
        </tr>
        </tbody>
      </table>
    </div>
  
</div>
  

  
<div class="modal" [ngStyle]="{display:modalFournisseur}" data-coreui-backdrop="static" data-coreui-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog ">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLiveLabel">Fournisseur</h5>
        <button class="btn-close" type="button" (click)="closeToggleModal()" data-coreui-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form #listFournisseur="">
            <div class="input-group">
              <span class="input-group-text col-5" id="basic-addon1">Liste des fournisseurs</span>
              <select class="form-control col-7"[(ngModel)]="fournisseur" [ngModelOptions]="{standalone: true}" [required]="true" aria-label="fournisseur" aria-describedby="basic-addon1">
                <option [ngValue]="line.id" *ngFor="let line of fournisseurs" >{{line.raison_social}}</option>
              </select>
            </div>
        </form>
      </div>
      <div class="text-center">
        <button class="btn btn-danger m-1" (click)="closeToggleModal()" type="button" data-coreui-dismiss="modal">Annuler</button>
        <button class="btn btn-success m-1" (click)="addToggleModal()" type="button">Valider</button>
      </div>
    </div>
  </div>
</div>

